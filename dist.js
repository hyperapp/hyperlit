import{text as t,h as e}from"https://unpkg.com/hyperapp";const l=t=>" "==t||"\t"==t||"\n"==t||"\r"==t;export default(n,...r)=>((n,r)=>{let o,p,f,h,u,a=[],g="",m=0;const s=e=>(e||0===e)&&a.push("string"==typeof e?t(e):"number"==typeof e?t(""+e):e),c=(t,l=t.flat())=>{s(o.call?o(f,l):e(o,f,l)),m=0},i=t=>{t&&(g=g.trimEnd()),s(g),g=""},y=()=>{h=[a,o,f,h],a=[],m=0},d=(t=m)=>{o=g,f={},m=t},b=(t=m)=>{f[g]=!0,m=t},x=t=>{f[p]=t,m=5},E=()=>{let t=a;[a,o,f,h]=h,c(t)};for(let t=0;t<n.length;t++){for(let e=0;e<n[t].length;e++)u=n[t][e],0==m?"<"==u?m=2:"\n"==u?g=u:l(u)&&l(g)||(m=1,g=u):1==m?"<"==u?(i(!0),m=2):g+=u:2==m?"/"==u?m=3:(m=4,g=u):3==m?">"==u&&E():4==m?l(u)?d(5):"/"==u?d(6):">"==u?(d(),y()):g+=u:6==m?">"==u&&c([]):5==m?"."==u||("/"==u?m=6:">"==u?y():l(u)||(g=u,m=7)):7==m?"="==u?(p=g,m=8):">"==u?(b(),y()):"/"==u?b(6):l(u)?b(5):g+=u:8==m?'"'==u&&(m=9,g=""):9==m&&('"'==u?x(g):g+=u);2==m?(o=r[t],f={},m=5):1==m?(i(!r[t]),s(r[t])):5==m?f={...f,...r[t]}:8==m?x(r[t]):9==m?g+=r[t]:0==m&&null!=r[t]&&s(r[t])}return a.length>1?a:a[0]})(n,r);
