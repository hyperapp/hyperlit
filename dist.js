import{text as t,h as e}from"https://unpkg.com/hyperapp";const l=t=>" "==t||"\t"==t||"\n"==t||"\r"==t;export default(n,...r)=>((n,r)=>{let o,f,p,a,h,u=[],g="",m=0;const s=e=>(e||0===e)&&u.push("string"==typeof e?t(e):"number"==typeof e?t(""+e):e),c=(t,l=t.flat())=>{s(o.call?o(p,l):e(o,p,l)),m=0},i=t=>{t&&(g=g.trimEnd()),s(g),g=""},y=()=>{a=[u,o,p,a],u=[],m=0},d=(t=m)=>{o=g,p={},m=t},b=(t=m)=>{p[g]=!0,m=t},x=t=>{p[f]=t,m=5},E=()=>{let t=u;[u,o,p,a]=a,c(t)};for(let t=0;t<n.length;t++){for(let e=0;e<n[t].length;e++)h=n[t][e],0==m?"<"==h?m=2:"\n"==h?g=h:l(h)&&l(g)||(m=1,g=h):1==m?"<"==h?(i(!0),m=2):g+=h:2==m?"/"==h?m=3:(m=4,g=h):3==m?">"==h&&E():4==m?l(h)?d(5):"/"==h?d(6):">"==h?(d(),y()):g+=h:6==m?">"==h&&c([]):5==m?"."==h||("/"==h?m=6:">"==h?y():l(h)||(g=h,m=7)):7==m?"="==h?(f=g,m=8):">"==h?(b(),y()):"/"==h?b(6):l(h)?b(5):g+=h:8==m?'"'==h&&(m=9,g=""):9==m&&('"'==h?x(g):g+=h);2==m?(o=r[t],p={},m=5):1==m?(i(!r[t]),s(r[t])):5==m?p={...p,...r[t]}:8==m?x(r[t]):9==m?g+=r[t]:0==m&&null!=r[t]&&s(r[t])}return u=u.flat(),u.length>1?u:u[0]})(n,r);
