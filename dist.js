import{text as t,h as l}from"http://unpkg.com/hyperapp";const e=t=>" "==t||"\t"==t||"\n"==t||"\r"==t;export default(n,...r)=>((n,r)=>{let o,p,f,h,a,g=[],s="",u=0;const c=l=>l&&g.push("string"==typeof l?t(l):l),i=(t,e=t.flat())=>{c(o.call?o(f,e):l(o,f,e)),u=0},m=t=>{t&&(s=s.trimEnd()),c(s),s=""},d=()=>{h=[g,o,f,h],g=[],u=0},y=(t=u)=>{o=s,f={},u=t},x=t=>c(0===t?"0":t),E=(t=u)=>{f[s]=!0,u=t},b=t=>{f[p]=t,u=5},j=()=>{let t=g;[g,o,f,h]=h,i(t)};for(let t=0;t<n.length;t++){for(let l=0;l<n[t].length;l++)a=n[t][l],0==u?"<"==a?u=2:"\n"==a?s=a:e(a)&&e(s)||(u=1,s=a):1==u?"<"==a?(m(!0),u=2):s+=a:2==u?"/"==a?u=3:(u=4,s=a):3==u?">"==a&&j():4==u?e(a)?y(5):"/"==a?y(6):">"==a?(y(),d()):s+=a:6==u?">"==a&&i([]):5==u?"."==a||("/"==a?u=6:">"==a?d():e(a)||(s=a,u=7)):7==u?"="==a?(p=s,u=8):">"==a?(E(),d()):"/"==a?E(6):e(a)?E(5):s+=a:8==u?'"'==a&&(u=9,s=""):9==u&&('"'==a?b(s):s+=a);2==u?(o=r[t],f={},u=5):1==u?(m(!r[t]),r[t]&&x(r[t])):5==u?f={...f,...r[t]}:8==u?b(r[t]):9==u?s+=r[t]:0==u&&null!=r[t]&&x(r[t])}return g.length>1?g:g[0]})(n,r);
